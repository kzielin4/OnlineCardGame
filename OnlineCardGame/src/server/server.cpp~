/**
 * Autor: Kamil Zieli≈Ñski
 */
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include "connection.h"
#include <thread>

void w1(int x)
{
	printf("%d",x);
}

int main(int argc, char **argv)
{

	std::thread t[5];
	for(int i = 0 ; i < 5 ; i++)
	{
		t[i] = std::thread(w1,i);
	}
	for(int i = 0 ; i < 5 ; i++)
	{
		t[i].join();
	}
    int socket, http_socket;
    int getC;
    int iluGraczy;
    pthread_t http_thread;
    char haslo[200];
    printf("Podaj haslo zabezpieczajace serwer: ");
    scanf("%99[^\n]",haslo);
    getC=getchar();
    printf("Podaj ilosc graczy wymaganych do rozpoczecia rozgrywki: ");
    scanf("%d",&iluGraczy);
    getC=getchar();
    if(iluGraczy<2 || iluGraczy>20)
         iluGraczy=3;
    //tworzenie socketu
    printf("\t\t\t!!!!!!!!!Uruchamiam Serwer!!!!!!!!!!!");
    socket = create_connection();
    //funkcja nasluchujaca
    listen_connections(socket,haslo,iluGraczy);
}
